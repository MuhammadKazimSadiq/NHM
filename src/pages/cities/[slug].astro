---
import Layout from "../../layouts/Layout.astro";
import Hero from "../../components/city/Hero.astro";
import Description from "../../components/city/Description.astro";
import Featured from "../../components/city/Featured.astro";
import Gallery from "../../components/city/Gallery.astro";

import { cities } from '../../data/cities/index';

export async function getStaticPaths() {
  return cities.map(city => ({ params: { slug: city.slug } }));
}

const { slug } = Astro.params;
const city = cities.find(c => c.slug === slug);

if (!city) throw new Error(`City not found: ${slug}`);


const {
  title,
  heroImage,
  descriptionTitle,
  descriptionText,
  descriptionImage,
  featured,
  gallery
} = city;
---

<Layout title={title}>
    <Hero img={heroImage} imgAlt={title} title={title} />
    <Description img={descriptionImage} imgAlt={title} title={descriptionTitle} text={descriptionText} />
    <Featured featured={featured} />
    <Gallery gallery={gallery} /> 
</Layout>
